<style>
    /*
        General styles
    */
    .img-fluid {
        max-width: 100%;
        height: auto;
    }

    /*
        Instagram feed styling
    */
    .eg-instagram-feed {
        overflow: hidden;
    }

    .eg-instagram-feed header {
    }

    .eg-instagram-feed header .title {
        margin-bottom: .5rem;
    }

    .eg-instagram-feed header .title-branded {
        display: inline-block;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .eg-instagram-feed header .button {
        margin-top: 1rem;
    }

    .eg-instagram-feed-list {
        display: flex;
        flex-wrap: wrap;
        list-style: none;
        margin: 3rem 0 0;
        padding: 0;
    }

    .eg-instagram-feed-list > li a {
        display: flex;
        position: relative;
    }

    .eg-instagram-feed-list > li a::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, .5);
        opacity: 0;
        transition: all .2s ease-out;
    }

    .eg-instagram-feed-list > li a:hover::before {
        opacity: 1;
    }

    .eg-instagram-feed-list > li a::after {
        content: "";
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        background: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'><path d='M16.98 0a6.9 6.9 0 0 1 5.08 1.98A6.94 6.94 0 0 1 24 7.02v9.96c0 2.08-.68 3.87-1.98 5.13A7.14 7.14 0 0 1 16.94 24H7.06a7.06 7.06 0 0 1-5.03-1.89A6.96 6.96 0 0 1 0 16.94V7.02C0 2.8 2.8 0 7.02 0h9.96zm.05 2.23H7.06c-1.45 0-2.7.43-3.53 1.25a4.82 4.82 0 0 0-1.3 3.54v9.92c0 1.5.43 2.7 1.3 3.58a5 5 0 0 0 3.53 1.25h9.88a5 5 0 0 0 3.53-1.25 4.73 4.73 0 0 0 1.4-3.54V7.02a5 5 0 0 0-1.3-3.49 4.82 4.82 0 0 0-3.54-1.3zM12 5.76c3.39 0 6.2 2.8 6.2 6.2a6.2 6.2 0 0 1-12.4 0 6.2 6.2 0 0 1 6.2-6.2zm0 2.22a3.99 3.99 0 0 0-3.97 3.97A3.99 3.99 0 0 0 12 15.92a3.99 3.99 0 0 0 3.97-3.97A3.99 3.99 0 0 0 12 7.98zm6.44-3.77a1.4 1.4 0 1 1 0 2.8 1.4 1.4 0 0 1 0-2.8z'/></svg>");
        background-repeat: no-repeat;
        background-size: 32px;
        background-position: center;
        opacity: 0;
        transform: scale(0);
        transition: all .2s ease-out;
    }

    .eg-instagram-feed-list > li a:hover::after {
        opacity: 1;
        transform: scale(1);
    }

    .eg-instagram-likes-comments-wrapper {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        padding: .75rem;
        color: white;
        opacity: 0;
        transform: translateY(2rem);
        transition: all .2s ease-out;
    }

    .eg-instagram-feed-list > li a:hover .eg-instagram-likes-comments-wrapper {
        opacity: 1;
        transform: translate(0)
    }

    .eg-instagram-likes {
        display: inline-block;
        position: relative;
        padding-left: 26px;
        margin: .75rem;
    }

    .eg-instagram-likes::before {
        content: "";
        background: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'><path d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z'/></svg>");
        background-repeat: no-repeat;
        background-position: center;
        width: 24px;
        height: 24px;
        display: block;
        background-size: 18px;
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
    }

    .eg-instagram-comments {
        display: inline-block;
        position: relative;
        padding-left: 26px;
        margin: .75rem;
    }

    .eg-instagram-comments::before {
        content: "";
        background: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'><path d='M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z'/></svg>");
        background-repeat: no-repeat;
        background-position: center;
        width: 24px;
        height: 24px;
        display: block;
        background-size: 18px;
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
    }

    /*
        Styles based on settings
    */
    #eg-instagram-feed-{{ section.id }} {
        {% unless section.settings.bg_color == 'rgba(0,0,0,0)' %}
            background-color: {{ section.settings.bg_color }};
        {% endunless %}
        {% unless section.settings.color == 'rgba(0,0,0,0)' %}
            color: {{ section.settings.color }};
        {% endunless %}
        padding-top: {{ section.settings.pt }}rem;
        padding-bottom: {{ section.settings.pb }}rem;
        margin-top: {{ section.settings.mt }}rem;
        margin-bottom: {{ section.settings.mb }}rem;
    }

    #eg-instagram-feed-{{ section.id }} header {
        {% if section.settings.header_center %}
            text-align: center;
        {% endif %}
    }

    #eg-instagram-feed-{{ section.id }} header .title {
        {% unless section.settings.color == 'rgba(0,0,0,0)' %}
            color: {{ section.settings.color }};
        {% endunless %}
    }

    @media (max-width: 749px) {
        #eg-instagram-feed-{{ section.id }} .eg-instagram-feed-list > li {
            width: {{ 100 | divided_by: section.settings.row_mobile | append: '%' }}
        }
    }

    @media (min-width: 750px) {
        #eg-instagram-feed-{{ section.id }} .eg-instagram-feed-list > li {
            width: {{ 100 | divided_by: section.settings.row_desktop | append: '%' }}
        }
    }

    /* Dummy code to fix editor styling */
    {}
</style>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
    })
</script>

<section
    id="eg-instagram-feed-{{ section.id }}"
    class="eg-instagram-feed">
    <div
        class="{% if section.settings.container %}page-width container{% endif %}"
        style="max-width: {{ section.settings.max_width }}px">
        <header class="">
            {% unless section.settings.title == blank %}
                <h2 class="title {{ section.settings.title_size }}">
                    {{ section.settings.title }}
                </h2>
            {% endunless %}
            {% unless section.settings.description == blank %}
                <div class="description rte">
                    {{ section.settings.description }}
                </div>
            {% endunless %}
            {% unless section.settings.btn_text == blank %}
                <a
                    href="{{ block.settings.btn_url }}"
                    class="button {{ section.settings.btn_color }}">
                    {{ section.settings.btn_text }}
                </a>
            {% endunless %}
        </header>
        <ul
            class="eg-instagram-feed-list">
            {% for block in section.blocks %}
                <li>
                    {% assign img_size = block.settings.img_width | append: 'x' | append: block.settings.img_height %}
                    <a
                        href="{{ block.settings.url }}"
                        target="_blank">
                        <img
                            class="img-fluid"
                            src="{{ block.settings.img | img_url: img_size, crop: 'center' }}"
                            alt="{{ block.settings.img.alt | escape }}"
                            width="{{ block.settings.img_width }}"
                            height="{{ block.settings.img_height }}"
                            loading="lazy">
                        <span class="eg-instagram-likes-comments-wrapper">
                            {% unless block.settings.likes_count == blank %}
                                <span class="eg-instagram-likes">
                                    {{ block.settings.likes_count }}
                                </span>
                            {% endunless %}
                            {% unless block.settings.comments_count == blank %}
                                <span class="eg-instagram-comments">
                                    {{ block.settings.comments_count }}
                                </span>
                            {% endunless %}
                        </span>
                    </a>
                </li>
            {% endfor %}
        </div>
    </div>
</section>

{% schema %}
{
    "name": "Instagram Feed",
    "settings": [
        {
            "type": "header",
            "content": "General"
        },
        {
            "type": "checkbox",
            "id": "container",
            "label": "Wrap in a container",
            "default": false
        },
        {
            "type": "color",
            "id": "bg_color",
            "label": "Background color"
        },
        {
            "type": "color",
            "id": "color",
            "label": "Text color"
        },
        {
            "type": "text",
            "id": "max_width",
            "label": "Max width (px)",
            "info": "Adjust container width (in pixels). Leave empty to use your theme's container width."
        },
        {
            "type": "header",
            "content": "Header"
        },
        {
            "type": "checkbox",
            "id": "header_center",
            "label": "Align center",
            "default": true
        },
        {
            "type": "text",
            "id": "title",
            "label": "Title",
            "default": "@mwwared"
        },
        {
            "type": "select",
            "id": "title_size",
            "label": "Title Size",
            "default": "h2",
            "options": [
                {  "value": "h1", "label": "H1" },
                {  "value": "h2", "label": "H2" },
                {  "value": "h3", "label": "H3" },
                {  "value": "h4", "label": "H4" },
                {  "value": "h5", "label": "H5" },
                {  "value": "h6", "label": "H6" }
            ]
        },
        {
            "type": "richtext",
            "id": "description",
            "label": "Description",
            "default": "<p>تابعنا على انستغرام لمتابعة كل جديدنا.</p>"
        },
        {
            "type": "url",
            "id": "btn_url",
            "label": "Button url"
        },
        {
            "type": "text",
            "id": "btn_text",
            "label": "Button text",
            "default": "تابعنا على انستغرام"
        },
        {
            "type": "select",
            "id": "btn_color",
            "label": "Button color",
            "default": "button--primary",
            "options": [
                { "group": "Normal", "value": "button--primary", "label": "Primary" },
                { "group": "Normal", "value": "button--secondary", "label": "Secondary" }
            ]
        },

        {
            "type": "header",
            "content": "Items per row"
        },
        {
            "type": "range",
            "id": "row_mobile",
            "label": "Items per row / mobile",
            "min": 1,
            "max": 3,
            "step": 1,
            "default": 2
        },
        {
            "type": "range",
            "id": "row_desktop",
            "label": "Items per row / desktop",
            "min": 1,
            "max": 6,
            "step": 1,
            "default": 4
        },
        {
            "type": "header",
            "content": "Spacing",
            "info": "Based on 'rem' values [Learn more](https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units)"
        },
        {
            "type": "range",
            "id": "pt",
            "label": "Padding top",
            "min": 0,
            "max": 12,
            "step": 1,
            "default": 0
        },
        {
            "type": "range",
            "id": "pb",
            "label": "Padding bottom",
            "min": 0,
            "max": 12,
            "step": 1,
            "default": 0
        },
        {
            "type": "range",
            "id": "mt",
            "label": "Margin top",
            "min": 0,
            "max": 12,
            "step": 1,
            "default": 0
        },
        {
            "type": "range",
            "id": "mb",
            "label": "Margin bottom",
            "min": 0,
            "max": 12,
            "step": 1,
            "default": 0
        }
    ],
    "blocks": [
        {
            "type": "block",
            "name": "Block",
            "settings": [
                {
                    "type": "image_picker",
                    "id": "img",
                    "label": "Image"
                },
                {
                    "type": "text",
                    "id": "img_width",
                    "label": "Image width (px)",
                    "default": "900"
                },
                {
                    "type": "text",
                    "id": "img_height",
                    "label": "Image height (px)",
                    "default": "900"
                },
                {
                    "type": "url",
                    "id": "url",
                    "label": "Post URL"
                },
                {
                    "type": "text",
                    "id": "likes_count",
                    "label": "Likes Count",
                    "info": "Leave empty to disable"
                },
                {
                    "type": "text",
                    "id": "comments_count",
                    "label": "Comments Count",
                    "info": "Leave empty to disable"
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Instagram Feed",
            "category": "Social"
        }
    ]
}
{% endschema %}